<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Gestión de Notas</title>
</h:head>

<h:body>
    <ui:composition template="./../PlantillaGrupo02.xhtml">
        <ui:define name="content">
            <h:form id="formNotas">
                <p:growl id="messages" showDetail="true" />

                <p:panel header="Información de la Nota">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputLabel for="curso" value="Curso:" />
                        <p:selectOneMenu id="curso" value="#{notaForm.selectedCursoId}" filter="true" filterMatchMode="contains">
                            <f:selectItems value="#{notaForm.listaCursos}" var="c" itemLabel="#{c.nombre}" itemValue="#{c.id}" />
                        </p:selectOneMenu>

                        <h:outputLabel for="estudiante" value="Estudiante:" />
                        <p:selectOneMenu id="estudiante" value="#{notaForm.selectedEstudianteId}" filter="true" filterMatchMode="contains">
                            <f:selectItems value="#{notaForm.listaEstudiantes}" var="e" itemLabel="#{e.nombre}" itemValue="#{e.id}" />
                        </p:selectOneMenu>

                        <h:outputLabel for="notaExamen" value="Nota Examen:" />
                        <p:inputText id="notaExamen" value="#{notaForm.nota.notaExamen}" required="true"/>

                        <h:outputLabel for="notaTarea" value="Nota Tarea:" />
                        <p:inputText id="notaTarea" value="#{notaForm.nota.notaTarea}" required="true"/>

                        <h:outputLabel for="notaLaboratorio" value="Nota Laboratorio:" />
                        <p:inputText id="notaLaboratorio" value="#{notaForm.nota.notaLaboratorio}" required="true"/>
                    </h:panelGrid>
                </p:panel>

                <p:commandButton value="Guardar" action="#{notaForm.guardarNota}" update=":formNotas:messages :formNotas:notasTable" />
                <p:commandButton value="Actualizar" action="#{notaForm.actualizarNota}" update=":formNotas:messages :formNotas:notasTable" />
                <p:commandButton value="Eliminar" action="#{notaForm.eliminarNota}" update=":formNotas:messages :formNotas:notasTable" />
                
                <p:dataTable var="nota" value="#{notaForm.listaNotas}" id="notasTable" editable="true" editMode="cell">
                    <p:column headerText="Curso">
                        <h:outputText value="#{nota.cursoId.nombre}" />
                    </p:column>
                    <p:column headerText="Estudiante">
                        <h:outputText value="#{nota.estudianteId.nombre}" />
                    </p:column>
                    <p:column headerText="Nota Examen">
                        <h:outputText value="#{nota.notaExamen}" />
                    </p:column>
                    <p:column headerText="Nota Tarea">
                        <h:outputText value="#{nota.notaTarea}" />
                    </p:column>
                    <p:column headerText="Nota Laboratorio">
                        <h:outputText value="#{nota.notaLaboratorio}" />
                    </p:column>
                    <p:column headerText="Nota Final">
                        <h:outputText value="#{nota.notaFinal}" />
                    </p:column>
                </p:dataTable>
            </h:form>
        </ui:define>
    </ui:composition>
</h:body>
</html>
